import{d as Q,C as j,r as m,b as x,c as z,a as e,f as g,e as _,p as h,m as K,u as p,w as n,o as v,t as i,n as T,i as I,g as L,y as U,E as b}from"./index-CTkTLTUi.js";import{a as G,u as H,b as J}from"./PlusIcon-BRVSf6Yh.js";import{u as O}from"./Modal.vue_vue_type_script_setup_true_lang-Tyj6Oo8g.js";import{_ as R}from"./DataTable.vue_vue_type_script_setup_true_lang-CMdErABm.js";import{_ as W,a as X}from"./ConfirmDialog.vue_vue_type_script_setup_true_lang-CcaFAIB0.js";const Y={class:"space-y-6"},Z={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between"},ee={class:"flex items-center"},te={class:"flex-shrink-0 h-10 w-10"},se={class:"h-10 w-10 rounded-lg bg-gray-200 flex items-center justify-center"},ae={class:"ml-4"},oe={class:"text-sm font-medium text-gray-900"},ne={class:"text-sm text-gray-500"},le={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-100 text-primary-800"},re={class:"text-sm text-gray-900"},ie={class:"flex items-center space-x-2"},ce=["onClick"],ue=["onClick"],xe=Q({__name:"ProductsView",setup(de){const o=j({page:1,pageSize:10,search:"",category:"",sortBy:"name",sortDirection:"asc"}),l=m(!1),c=m(!1),u=m(null),r=m(null),C=G(),k=[{key:"name",label:"Product",sortable:!0},{key:"category",label:"Category",sortable:!0},{key:"variants",label:"Variants",align:"center"},{key:"status",label:"Status",sortable:!0},{key:"createdAt",label:"Created",sortable:!0,format:"date"},{key:"actions",label:"Actions",align:"right"}],{data:y,isLoading:w,refetch:me}=H({queryKey:["products",o],queryFn:()=>b.getProducts(o),keepPreviousData:!0}),P=x(()=>{var t;return((t=y.value)==null?void 0:t.data)||[]}),D=x(()=>{var t;return(t=y.value)==null?void 0:t.meta}),A=t=>{o.search=t,o.page=1},B=(t,a)=>{o.sortBy=t,o.sortDirection=a,o.page=1},S=t=>{o.page=t},$=()=>{o.page=1},V=()=>{u.value=null,l.value=!0},E=t=>{u.value=t,l.value=!0},M=t=>{r.value=t,c.value=!0},q=O({mutationFn:t=>b.deleteProduct(t),onSuccess:()=>{C.invalidateQueries({queryKey:["products"]}),c.value=!1,r.value=null}}),F=async()=>{r.value&&await q.mutateAsync(r.value.id)},N=()=>{l.value=!1,u.value=null};return(t,a)=>{var f;return v(),z("div",Y,[e("div",Z,[a[4]||(a[4]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Products"),e("p",{class:"mt-1 text-sm text-gray-500"}," Manage your product catalog and variants ")],-1)),e("button",{onClick:V,class:"btn btn-primary"},[g(p(J),{class:"w-4 h-4 mr-2"}),a[3]||(a[3]=K(" Add Product ",-1))])]),g(R,{title:"Product Masters",description:"All products in your catalog",columns:k,data:P.value,loading:p(w),pagination:D.value,"sort-by":o.sortBy,"sort-direction":o.sortDirection,onSearch:A,onSort:B,onPageChange:S},{actions:n(()=>[L(e("select",{"onUpdate:modelValue":a[0]||(a[0]=s=>o.category=s),class:"input w-40",onChange:$},[...a[5]||(a[5]=[e("option",{value:""},"All Categories",-1),e("option",{value:"Electronics"},"Electronics",-1),e("option",{value:"Clothing"},"Clothing",-1),e("option",{value:"Books"},"Books",-1)])],544),[[U,o.category]])]),"cell-name":n(({item:s})=>[e("div",ee,[e("div",te,[e("div",se,[g(p(I),{class:"h-5 w-5 text-gray-500"})])]),e("div",ae,[e("div",oe,i(s.name),1),e("div",ne,i(s.slug),1)])])]),"cell-category":n(({value:s})=>[e("span",le,i(s),1)]),"cell-variants":n(({item:s})=>{var d;return[e("span",re,i(((d=s.variants)==null?void 0:d.length)||0)+" variants ",1)]}),"cell-status":n(({value:s})=>[e("span",{class:T(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",s===1?"bg-green-100 text-green-800":s===0?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"])},i(s===1?"Active":s===0?"Inactive":"Archived"),3)]),"cell-actions":n(({item:s})=>[e("div",ie,[e("button",{onClick:d=>E(s),class:"text-primary-600 hover:text-primary-900 text-sm font-medium"}," Edit ",8,ce),e("button",{onClick:d=>M(s),class:"text-red-600 hover:text-red-900 text-sm font-medium"}," Delete ",8,ue)])]),_:1},8,["data","loading","pagination","sort-by","sort-direction"]),l.value?(v(),_(W,{key:0,product:u.value,onClose:a[1]||(a[1]=s=>l.value=!1),onSaved:N},null,8,["product"])):h("",!0),c.value?(v(),_(X,{key:1,title:"Delete Product",message:"Are you sure you want to delete this product?","item-name":(f=r.value)==null?void 0:f.name,warning:"This action cannot be undone. All variants will also be deleted.","confirm-text":"Delete","loading-text":"Deleting...",onConfirm:F,onCancel:a[2]||(a[2]=s=>c.value=!1)},null,8,["item-name"])):h("",!0)])}}});export{xe as default};
