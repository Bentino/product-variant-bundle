import{d as j,r as F,b as L,s as M,c as o,a,p,t as c,W as C,f as y,g as z,u as h,v as U,F as x,j as f,n as d,m as k,o as r}from"./index-CTkTLTUi.js";import{r as W,c as E,d as K,e as O,f as Q}from"./PlusIcon-BRVSf6Yh.js";const R={class:"card"},q={class:"px-6 py-4 border-b border-gray-200"},A={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-3 sm:space-y-0"},G={class:"text-lg font-medium text-gray-900"},H={key:0,class:"mt-1 text-sm text-gray-500"},J={class:"flex items-center space-x-3"},X={class:"relative"},Y={class:"overflow-x-auto"},Z={class:"table"},_=["onClick"],tt={class:"flex items-center space-x-1"},et={key:0,class:"flex flex-col"},st={class:"divide-y divide-gray-200"},at={key:0},nt=["colspan"],it={key:1},ot=["colspan"],rt={key:0,class:"px-6 py-4 border-t border-gray-200"},lt={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-3 sm:space-y-0"},ct={class:"text-sm text-gray-700"},dt={class:"flex items-center space-x-2"},gt=["disabled"],ut={class:"flex items-center space-x-1"},yt=["onClick"],ht=["disabled"],ft=j({__name:"DataTable",props:{title:{},description:{},columns:{},data:{},loading:{type:Boolean,default:!1},pagination:{},sortBy:{},sortDirection:{default:"asc"}},emits:["search","sort","page-change"],setup(e,{emit:N}){const g=e,b=N,m=F(""),P=L(()=>{if(!g.pagination)return[];const n=g.pagination.page,s=g.pagination.totalPages,t=2,l=[],i=[];for(let u=Math.max(2,n-t);u<=Math.min(s-1,n+t);u++)l.push(u);return n-t>2?i.push(1,"..."):i.push(1),i.push(...l),n+t<s-1?i.push("...",s):i.push(s),i.filter((u,T,I)=>I.indexOf(u)===T)}),w=()=>{b("search",m.value)},$=n=>{const s=g.sortBy===n&&g.sortDirection==="asc"?"desc":"asc";b("sort",n,s)},v=n=>{b("page-change",n)},B=(n,s)=>n.id||n.key||s,D=(n,s)=>s.split(".").reduce((t,l)=>t==null?void 0:t[l],n),V=(n,s)=>{if(n==null)return"-";switch(s.format){case"currency":return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(n);case"date":return new Date(n).toLocaleDateString();case"datetime":return new Date(n).toLocaleString();case"number":return new Intl.NumberFormat().format(n);default:return n}};let S;return M(m,()=>{clearTimeout(S),S=setTimeout(()=>{w()},300)}),(n,s)=>(r(),o("div",R,[a("div",q,[a("div",A,[a("div",null,[a("h3",G,c(e.title),1),e.description?(r(),o("p",H,c(e.description),1)):p("",!0)]),a("div",J,[a("div",X,[y(h(W),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),z(a("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>m.value=t),type:"text",placeholder:"Search...",class:"input pl-10 w-64",onInput:w},null,544),[[U,m.value]])]),C(n.$slots,"actions")])])]),a("div",Y,[a("table",Z,[a("thead",null,[a("tr",null,[(r(!0),o(x,null,f(e.columns,t=>(r(),o("th",{key:t.key,class:d([t.sortable?"cursor-pointer hover:bg-gray-100":"",t.align==="center"?"text-center":"",t.align==="right"?"text-right":""]),onClick:l=>t.sortable?$(t.key):null},[a("div",tt,[a("span",null,c(t.label),1),t.sortable?(r(),o("div",et,[y(h(E),{class:d(["w-3 h-3 -mb-1",e.sortBy===t.key&&e.sortDirection==="asc"?"text-primary-500":"text-gray-300"])},null,8,["class"]),y(h(K),{class:d(["w-3 h-3",e.sortBy===t.key&&e.sortDirection==="desc"?"text-primary-500":"text-gray-300"])},null,8,["class"])])):p("",!0)])],10,_))),128))])]),a("tbody",st,[e.loading?(r(),o("tr",at,[a("td",{colspan:e.columns.length,class:"text-center py-12"},[...s[3]||(s[3]=[a("div",{class:"flex items-center justify-center"},[a("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary-500"}),a("span",{class:"ml-2 text-gray-500"},"Loading...")],-1)])],8,nt)])):e.data.length?(r(!0),o(x,{key:2},f(e.data,(t,l)=>(r(),o("tr",{key:B(t,l)},[(r(!0),o(x,null,f(e.columns,i=>(r(),o("td",{key:i.key,class:d([i.align==="center"?"text-center":"",i.align==="right"?"text-right":""])},[C(n.$slots,`cell-${i.key}`,{item:t,value:D(t,i.key),index:l},()=>[k(c(V(D(t,i.key),i)),1)])],2))),128))]))),128)):(r(),o("tr",it,[a("td",{colspan:e.columns.length,class:"text-center py-12 text-gray-500"}," No data available ",8,ot)]))])])]),e.pagination&&e.pagination.totalPages>1?(r(),o("div",rt,[a("div",lt,[a("div",ct," Showing "+c((e.pagination.page-1)*e.pagination.pageSize+1)+" to "+c(Math.min(e.pagination.page*e.pagination.pageSize,e.pagination.totalItems))+" of "+c(e.pagination.totalItems)+" results ",1),a("div",dt,[a("button",{disabled:!e.pagination.hasPreviousPage,onClick:s[1]||(s[1]=t=>v(e.pagination.page-1)),class:d(["btn btn-secondary btn-sm",{"opacity-50 cursor-not-allowed":!e.pagination.hasPreviousPage}])},[y(h(O),{class:"w-4 h-4"}),s[4]||(s[4]=k(" Previous ",-1))],10,gt),a("div",ut,[(r(!0),o(x,null,f(P.value,t=>(r(),o("button",{key:t,onClick:l=>v(t),class:d(["btn btn-sm",t===e.pagination.page?"btn-primary":"btn-secondary"])},c(t),11,yt))),128))]),a("button",{disabled:!e.pagination.hasNextPage,onClick:s[2]||(s[2]=t=>v(e.pagination.page+1)),class:d(["btn btn-secondary btn-sm",{"opacity-50 cursor-not-allowed":!e.pagination.hasNextPage}])},[s[5]||(s[5]=k(" Next ",-1)),y(h(Q),{class:"w-4 h-4"})],10,ht)])])])):p("",!0)]))}});export{ft as _};
